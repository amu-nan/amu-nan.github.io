<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Organize - Xforia</title>
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/organize.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <header>
        <div class="logo-container">
            <img src="../images/logo.png" alt="Xforia COAST Logo" class="logo">
            <span class="tagline">Your tagline goes here.</span>
        </div>
        <div class="coast-flow-header">
            <div class="coast-step-container">
                <span class="coast-letter">C</span>
                <span class="coast-step-name"></span>
            </div>
            <div class="coast-step-container">
                <span class="coast-letter active">O</span>
                <span class="coast-step-name active">Organize</span>
            </div>
            <div class="coast-step-container">
                <span class="coast-letter">A</span>
                <span class="coast-step-name"></span>
            </div>
            <div class="coast-step-container">
                <span class="coast-letter">S</span>
                <span class="coast-step-name"></span>
            </div>
            <div class="coast-step-container">
                <span class="coast-letter">T</span>
                <span class="coast-step-name"></span>
            </div>
        </div>
    </header>

    <main class="organize-page">
        <section class="organize-content">
            <h2 class="page-title">Organize - Tell us about your organization.</h2>
            <div class="form-section">
                <div class="form-group">
                    <label for="org-name">Name of organization:</label>
                    <input type="text" id="org-name" placeholder="Enter organization name">
                </div>

                <div class="form-group">
                    <label for="org-type">Choose type of organization:</label>
                    <select id="org-type">
                        <option value="healthcare">Healthcare</option>
                        <option value="retail" disabled>Retail (Coming Soon)</option>
                        <option value="academic" disabled>Academic (Coming Soon)</option>
                    </select>
                </div>
            </div>

            <div class="entities-section">
                <h3 class="section-title">Display all possible entities to choose from:</h3>
                <div class="entity-bubbles">
                    <div class="bubble active" data-entity="owner">Owner</div>
                    <div class="bubble active" data-entity="nurse">Nurse</div>
                    <div class="bubble active" data-entity="patient">Patient</div>
                    <div class="bubble active" data-entity="relative">Relative</div>
                    <div class="bubble disabled" data-entity="casemanager">Case Manager</div>
                    <div class="bubble disabled" data-entity="socialworkers">Social Workers</div>
                    <div class="bubble disabled" data-entity="specialists">Specialists</div>
                </div>
                <p class="select-note">Please select the entities you want to continue with.</p>
            </div>

            <button id="continue-btn" class="continue-button">Continue</button>
        </section>
    </main>
    <script src="../js/scripts.js"></script>
    <script>
        const continueBtn = document.getElementById('continue-btn');
        const orgNameInput = document.getElementById('org-name');
        const entityBubbles = document.querySelectorAll('.entity-bubbles .bubble:not(.disabled)');
    
        const selectedEntities = new Set();
        
        // Toggle selection
        entityBubbles.forEach(bubble => {
            bubble.addEventListener('click', () => {
                const entity = bubble.dataset.entity;
                if (bubble.classList.contains('selected')) {
                    selectedEntities.delete(entity);
                    bubble.classList.remove('selected');
                } else {
                    selectedEntities.add(entity);
                    bubble.classList.add('selected');
                }
            });
        });
    
        continueBtn.addEventListener('click', () => {
            const orgName = orgNameInput.value;
            const entitiesArray = Array.from(selectedEntities);
    
            sessionStorage.setItem('orgName', orgName);
            sessionStorage.setItem('selectedEntities', JSON.stringify(entitiesArray));
    
            window.location.href = 'rbac.html';
        });
    </script>
</body>
</html>
